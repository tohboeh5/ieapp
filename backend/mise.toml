[tasks.install]
run = "uv sync"

[tasks.build-sandbox]
run = "./build_sandbox.sh"
sources = ["src/app/sandbox/runner.js"]
outputs = ["src/app/sandbox/sandbox.wasm"]

[tasks.dev]
depends = ["build-sandbox"]
run = "uv run uvicorn src.app.main:app --host 0.0.0.0 --port 8000 --reload"

[tasks.format]
run = "uvx ruff format ."

[tasks.lint]
run = ["uvx ruff check --select ALL .", "uv run ty check ."]

[tasks.test]
run = "uv run pytest"

