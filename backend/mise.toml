[env]
_.python.venv = { path = ".venv" }

[tasks.install]
run = "uv sync"

[tasks.dev]
# IEAPP_ALLOW_REMOTE=true allows remote connections in dev containers / Codespaces
run = "IEAPP_ROOT=\"${IEAPP_ROOT:-/tmp/ieapp-dev}\" IEAPP_ALLOW_REMOTE=true uv run uvicorn src.app.main:app --host 0.0.0.0 --port 8000 --reload --reload-dir . --reload-dir ../ieapp-core/ieapp_core"

[tasks.test]
run = "IEAPP_ROOT=\"${IEAPP_ROOT:-/tmp/ieapp-test}\" uv run pytest"
description = "Run backend pytest suite"
depends = ["//ieapp-core:build"]

