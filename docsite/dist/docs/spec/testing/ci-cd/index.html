<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><title>Docs: spec/testing/ci-cd.md</title><link rel="stylesheet" href="/_astro/_slug_.DCtb3bYL.css"></head> <body> <header class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-3 px-4 py-4"> <a href="/" class="text-lg font-semibold">Ugoite Docsite</a> <nav class="flex items-center gap-4 text-sm"> <a href="/docs/guide/cli" class="underline-offset-2 hover:underline">CLI Guide</a> <a href="/docs/spec/api/rest" class="underline-offset-2 hover:underline">REST API</a> <a href="/docs/spec/api/mcp" class="underline-offset-2 hover:underline">MCP API</a> </nav> <div class="flex items-center gap-3"> <label for="theme" class="text-sm text-slate-600">Theme</label> <select id="theme" class="rounded-md border px-2 py-1 text-sm" data-theme-selector> <option value="materialize">Materialize</option><option value="classic">Classic</option><option value="pop">Pop</option> </select> <label for="mode" class="text-sm text-slate-600">Mode</label> <select id="mode" class="rounded-md border px-2 py-1 text-sm" data-mode-selector> <option value="light">Light</option> <option value="dark">Dark</option> </select> </div> <script type="module">const o="ugoite-ui-theme",l="ugoite-color-mode",m=document.documentElement,e=document.querySelector("[data-theme-selector]"),t=document.querySelector("[data-mode-selector]"),a=()=>{const c=e instanceof HTMLSelectElement?e.value:localStorage.getItem(o)||"materialize",n=t instanceof HTMLSelectElement?t.value:localStorage.getItem(l)||"light";m.dataset.uiTheme=c,m.dataset.colorMode=n,localStorage.setItem(o,c),localStorage.setItem(l,n)},i=localStorage.getItem(o)||"materialize",s=localStorage.getItem(l)||"light";e instanceof HTMLSelectElement&&(e.value=i,e.addEventListener("change",()=>{a()}));t instanceof HTMLSelectElement&&(t.value=s,t.addEventListener("change",()=>{a()}));a();</script> </header> <main class="mx-auto max-w-6xl px-4 pb-16">  <article class="prose max-w-none rounded-xl border p-6" style="background: var(--doc-card); border-color: var(--doc-border);"> <p class="mb-4 text-xs" style="color: var(--doc-muted);">Source: /docs/spec/testing/ci-cd.md</p> <h1>CI/CD Pipeline</h1>
<h2>GitHub Actions Workflows</h2>
<table>
<thead>
<tr>
<th>Workflow</th>
<th>File</th>
<th>Triggers</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td>Python CI</td>
<td><code>.github/workflows/python-ci.yml</code></td>
<td>Push, PR</td>
<td>Lint, type check, pytest</td>
</tr>
<tr>
<td>Frontend CI</td>
<td><code>.github/workflows/frontend-ci.yml</code></td>
<td>Push, PR</td>
<td>Lint (biome)</td>
</tr>
<tr>
<td>E2E Tests</td>
<td><code>.github/workflows/e2e-ci.yml</code></td>
<td>Push, PR</td>
<td>Full E2E with live servers</td>
</tr>
<tr>
<td>Docker Build CI</td>
<td><code>.github/workflows/docker-build-ci.yml</code></td>
<td>Push, PR</td>
<td>Build backend/frontend images and validate compose</td>
</tr>
</tbody></table>
<h2>Python CI</h2>
<pre><code class="language-yaml">jobs:
  lint:
    - ruff format --check .
    - ruff check .
  type-check:
    - cd backend &amp;&amp; uv run ty check .
    - cd ugoite-cli &amp;&amp; uv run ty check .
  test:
    - cd backend &amp;&amp; uv run pytest
    - cd ugoite-cli &amp;&amp; uv run pytest
</code></pre>
<h2>Frontend CI</h2>
<pre><code class="language-yaml">jobs:
  lint:
    - cd frontend &amp;&amp; biome ci .
  test:
    - cd frontend &amp;&amp; bun test
</code></pre>
<h2>E2E CI</h2>
<pre><code class="language-yaml">jobs:
  e2e:
    - Start backend (background)
    - Start frontend (background)
    - Wait for servers
    - cd e2e &amp;&amp; npm run test
    timeout: 30 minutes
</code></pre>
<h2>Pre-commit Hooks</h2>
<p>Install and enable:</p>
<pre><code class="language-bash">uvx pre-commit install
uvx pre-commit run --all-files
</code></pre>
<p>Hooks configured in <code>.pre-commit-config.yaml</code>:</p>
<ul>
<li><strong>Ruff</strong>: Auto-formats and lints Python</li>
<li><strong>Ty</strong>: Type checks Python projects</li>
</ul>
<h2>Release Process</h2>
<ol>
<li><strong>Version Bump</strong>: Update version in <code>pyproject.toml</code> files</li>
<li><strong>Changelog</strong>: Update CHANGELOG.md</li>
<li><strong>Tag</strong>: Create git tag <code>v{version}</code></li>
<li><strong>Build</strong>: CI builds Docker images and wheels</li>
<li><strong>Publish</strong>: Push to registry (manual approval)</li>
</ol>
<h2>Environment Variables</h2>
<h3>CI Environment</h3>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td><code>UGOITE_ROOT</code></td>
<td>Data directory path</td>
</tr>
<tr>
<td><code>UGOITE_ALLOW_REMOTE</code></td>
<td>Enable remote connections</td>
</tr>
<tr>
<td><code>BACKEND_URL</code></td>
<td>Backend URL for frontend proxy</td>
</tr>
</tbody></table>
<h3>Secrets</h3>
<table>
<thead>
<tr>
<th>Secret</th>
<th>Purpose</th>
</tr>
</thead>
<tbody><tr>
<td><code>DOCKER_USERNAME</code></td>
<td>Container registry auth</td>
</tr>
<tr>
<td><code>DOCKER_PASSWORD</code></td>
<td>Container registry auth</td>
</tr>
</tbody></table>
<h2>Local CI Verification</h2>
<p>Before pushing, run the same checks as CI:</p>
<pre><code class="language-bash"># Python
uvx ruff format --check .
uvx ruff check .
cd backend &amp;&amp; uv run ty check . &amp;&amp; uv run pytest
cd ugoite-cli &amp;&amp; uv run ty check . &amp;&amp; uv run pytest

# Frontend
cd frontend &amp;&amp; biome ci . &amp;&amp; bun test

# E2E (requires servers running)
mise run e2e
</code></pre>
<p>Or use pre-commit:</p>
<pre><code class="language-bash">uvx pre-commit run --all-files
</code></pre>
 </article>  </main> </body></html>