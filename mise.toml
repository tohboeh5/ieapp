min_version = "2025.11.3"
experimental_monorepo_root = true

[settings]
experimental = true

[env]
CARGO_HOME = "{{env.HOME}}/.cargo"
RUSTUP_HOME = "{{env.HOME}}/.rustup"
PYO3_USE_ABI3_FORWARD_COMPATIBILITY = "1"

[tools]
biome = "2.3.11"
bun = "1.3.2"
python = "3.13"
rust = "1.92.0"
uv = "0.9.8"

[tasks.setup]
depends = ["//backend:install", "//frontend:install", "//ieapp-cli:install", "//ieapp-core:install", "//e2e:install"]

[tasks.dev]
depends = ["//backend:dev", "//frontend:dev"]

[tasks.test]
depends = ["//backend:test", "//frontend:test", "//ieapp-cli:test", "//ieapp-core:test"]
description = "Run tests for all packages (ieapp-core, backend, frontend, ieapp-cli)"

[tasks.e2e]
description = "Run E2E tests with backend and frontend servers"
run = "bash scripts/run-e2e.sh full"

[tasks."e2e:smoke"]
description = "Run only smoke E2E tests (fast verification)"
run = "bash scripts/run-e2e.sh smoke"

[tasks."e2e:notes"]
description = "Run notes E2E tests"
run = "bash scripts/run-e2e.sh notes"