min_version = "2025.11.3"
experimental_monorepo_root = true

[env]
_.python.venv = { path = "backend/.venv" }

[tools]
biome = "2.3.11"
bun = "1.3.2"
python = "3.13"
rust = "1.92.0"
uv = "0.9.8"

[tasks.install]
depends = ["//backend:install", "//frontend:install", "//ieapp-cli:install", "//ieapp-core:install"]

[tasks.dev]
depends = ["//backend:dev", "//frontend:dev"]

[tasks."sandbox:build"]
run = "uv run /workspace/ieapp-cli/scripts/build_sandbox.py"

[tasks.test]
depends = ["//backend:test", "//frontend:test", "//ieapp-cli:test", "//ieapp-core:test"]
description = "Run tests for all packages (ieapp-core, backend, frontend, ieapp-cli)"

[tasks.e2e]
description = "Run E2E tests with backend and frontend servers"
run = "bash /workspace/scripts/run-e2e.sh full"

[tasks."e2e:smoke"]
description = "Run only smoke E2E tests (fast verification)"
run = "bash /workspace/scripts/run-e2e.sh smoke"

[tasks."e2e:notes"]
description = "Run notes E2E tests"
run = "bash /workspace/scripts/run-e2e.sh notes"